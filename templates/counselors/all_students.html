<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <title>所有学生信息</title>
    <style>
        table { width: 100%; border-collapse: collapse; }
        th, td { border: 1px solid #ddd; padding: 8px; }
        th { background-color: #f2f2f2; }
        .nav { margin: 20px 0; }
    </style>
</head>
<body>
    <div class="nav">
        <a href="{% url 'counselor_dashboard' %}">返回控制台</a>
        <a href="{% url 'counselor_logout' %}" style="margin-left: 10px; color: #e74c3c;">退出登录</a>
    </div>

    <h2>所有学生信息</h2>
    <table>
        <tr>
            <th>排名</th>
            <th>学号</th>
            <th>姓名</th>
            <th>学院</th>
            <th>学业综合成绩</th>
            <th>学术专长成绩</th>
            <th>综合表现成绩</th>
            <th>总成绩</th>
            <th>操作</th>
        </tr>
        {% for student in students %}
        <tr>
            <td>{% with rank_data=student.get_rank %}{{ rank_data.0 }}{% endwith %}</td>
            <td>{{ student.student_id }}</td>
            <td>{{ student.full_name }}</td>
            <td>{{ student.college }}</td>
            <td>{{ student.academic_comprehensive_score|default:"未设置" }}</td>
            <td>{{ student.academic_expertise_score }}</td>
            <td>{{ student.comprehensive_performance_score }}</td>
            <td>{{ student.total_score|default:"-" }}</td>
            <td>
                <a href="{% url 'set_academic_score' student.id %}" class="btn btn-primary">
                    设置学业综合成绩
                </a>
            </td>
        </tr>
        {% empty %}
        <tr><td colspan="9">暂无学生数据</td></tr>
        {% endfor %}
    </table>


</body>
</html>